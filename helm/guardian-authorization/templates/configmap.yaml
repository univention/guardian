---
{{ include "common.configMap" (dict "top" . "overrides" "guardian-authorization.configMap") }}

{{- define "guardian-authorization.configMap" }}

data:
{{- with .top.Values.guardianAuthorizationApi }}
  HOME: "{{ .home }}"
  GUARDIAN__AUTHZ__CORS__ALLOWED_ORIGINS: "{{ .guardianAuthzCorsAllowedOrigins }}"
  GUARDIAN__AUTHZ__ADAPTER__SETTINGS_PORT: "{{ .guardianAuthzAdapterSettingsPort }}"
  GUARDIAN__AUTHZ__ADAPTER__PERSISTENCE_PORT: "{{ .guardianAuthzAdapterAppPersistencePort }}"
  GUARDIAN__AUTHZ__ADAPTER__POLICY_PORT: "{{ .guardianAuthzAdapterPolicyPort }}"
  GUARDIAN__AUTHZ__ADAPTER__AUTHENTICATION_PORT: "{{ .guardianAuthzAdapteriAuthenticationPort }}"
  IS_UNIVENTION_APPCENTER: "{{ .isUniventionAppCenter }}"
  UDM_DATA_ADAPTER__URL: "{{ .udmDataAdapterUrl }}"
  UDM_DATA_ADAPTER__USERNAME: "{{ .udmDataAdapterUsername }}"
  UDM_DATA_ADAPTER__PASSWORD: "{{ .udmDataAdapterPassword }}"
  OPA_ADAPTER__URL: "{{ .opaAdapterUrl }}"
  GUARDIAN__AUTHZ__LOGGING__LEVEL: "{{ .guardianAuthzLoggingLevel }}"
  GUARDIAN__AUTHZ__LOGGING__STRUCTURED: "{{ .guardianAuthzLoggingStructured }}"
  GUARDIAN__AUTHZ__LOGGING__FORMAT: "{{ .guardianAuthzLoggingFormat }}"
  OAUTH_ADAPTER__WELL_KNOWN_URL: "{{ .oauthAdapterWellKnownUrl }}"
{{ end }}

{{- with .top.Values.openPolicyAgent }}
  IS_UNIVENTION_APPCENTER: "{{ .isUniventionAppCenter }}"
  OPA_DATA_BUNDLE: "{{ .opaDataBundle }}"
  OPA_POLICY_BUNDLE: "{{ .opaPolicyBundle }}"
  OPA_POLLING_MIN_DELAY: "{{ .opaPollingMinDelay }}"
  OPA_POLLING_MAX_DELAY: "{{ .opaPollingMaxDelay }}"
  OPA_GUARDIAN_AUTHZ_URL: "{{ .opaGuardianManagementUrl }}"
{{ end }}
{{ end }}
...
